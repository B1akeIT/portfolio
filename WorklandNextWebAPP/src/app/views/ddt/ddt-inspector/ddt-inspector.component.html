<div class="text-center py-3" *ngIf="loading">
  <div class="h1 text-muted text-center mt-5 mb-1">
    <i class="fa fa-circle-o-notch fa-spin"></i>
  </div>
</div>
<div class="h-75" *ngIf="!ddt && !loading">
	<div class="details-content h-100">
    <div class="d-flex flex-column justify-content-center align-items-center h-100">
      <!-- loading & messages -->
      <div class="text-center" style="height: 120px;" *ngIf="!dragging">
        <ng-lottie [options]="options" (animationCreated)="animationCreated($event)"></ng-lottie>
      </div>
      <div class="text-center">
        <i class="icon-mouse icon-messages-50" *ngIf="dragging"></i>
        <h6 class="no-messages-text mt-3">{{ 'APP.MESSAGE.select_ddt' | translate }}</h6>
      </div>
    </div>
	</div>
  <div class="layout-content ddt-container" *ngIf="error">
    <div class="text-center py-3">
      <div class="h1 text-muted text-center mt-5 mb-1">
        <h5>{{ errorMessage }}</h5>
      </div>
    </div>
  </div>
</div>
<div class="mt-3" *ngIf="ddt && !loading">
  <div class="details-content">
    <div class="">
      <div class="ddt-email"><span class="badge badge-light">{{ ddt.numero }}</span></div>
      <div class="ddt-name" [title]="ddt.id">{{ ddt.titolo || '-' }}</div>
      <div class="ddt-email"><span class="badge badge-success">{{ ddt.stato }}</span></div>
      <div class="ddt-email"><span class="badge badge-light">{{ ddt.categoriaDocumentoDescrizione || ddt.categoriaDocumentoId }}</span></div>
      <div class="ddt-email mb-3"><span class="badge badge-light">{{ (ddt.dataCreazione | date: 'dd-MM-yyy') || '-' }}</span> | <span class="badge badge-light">{{ (ddt.dataScadenza | date: 'dd-MM-yyy') || '-' }}</span></div>
      <!-- <div class="text-center small mb-2">{{ ddt.id }}</div> -->
      <div class="card mb-1">
        <div class="card-body">
          <address>
            <strong>{{ 'APP.TITLE.intestatario' | translate }}</strong><br>
            {{ ddt.nominativoIntestatario || '-' }}<br>
            {{ ddt.indirizzoIntestatario || '-' }}<br>
            {{ ddt.capIntestatario || '-' }} {{ ddt.comuneIntestatario || '-' }} {{ ddt.provinciaIntestatario || '-' }}<br>
            {{ ddt.nazioneIntestatario || '-' }}<br>
          </address>
          <dl class="mt-2 mb-0">
            <dt>{{ 'APP.FIELD.piva' | translate }}</dt>
            <dd class="pt-2">{{ ddt.piva || '-' }}</dd>
            <dt>{{ 'APP.FIELD.codiceFiscale' | translate }}</dt>
            <dd class="pt-2 mb-0">{{ ddt.codiceFiscale || '-' }}</dd>
          </dl>
        </div>
      </div>
      <div class="card mb-1">
        <div class="card-body">
          <address>
            <strong>{{ 'APP.TITLE.destinazione' | translate }}</strong><br>
            {{ ddt.nominativoDestinazione || '-' }}<br>
            {{ ddt.indirizzoDestinazione || '-' }}<br>
            {{ ddt.capDestinazione || '-' }} {{ ddt.comuneDestinazione || '-' }} {{ ddt.provinciaDestinazione || '-' }}<br>
            {{ ddt.nazioneDestinazione || '-' }}<br>
          </address>
        </div>
      </div>
      <div class="card mb-1">
        <div class="card-body">
          <address>
            <strong>{{ 'APP.TITLE.fatturazione' | translate }}</strong><br>
            {{ ddt.nominativoFatturazione || '-' }}<br>
            {{ ddt.indirizzoFatturazione || '-' }}<br>
            {{ ddt.capFatturazione || '-' }} {{ ddt.comuneFatturazione || '-' }} {{ ddt.provinciaFatturazione || '-' }}<br>
            {{ ddt.nazioneFatturazione || '-' }}<br>
          </address>
        </div>
      </div>
      <div class="card mb-1">
        <div class="card-body">
          <dl class="mt-2 mb-0">
            <dt>{{ 'APP.FIELD.totaleLordo' | translate }}</dt>
            <dd class="pt-2">{{ (ddt.totaleLordo | currency:'EUR':'':'1.2-2':'it-IT') || '-' }}</dd>
            <dt>{{ 'APP.FIELD.totaleIva' | translate }}</dt>
            <dd class="pt-2 mb-1">{{ (ddt.totaleIva | currency:'EUR':'':'1.2-2':'it-IT') || '-' }}</dd>
          </dl>
        </div>
      </div>
      <app-item-attribute *ngFor="let field of objectKey(ddt)"
        [attribute]="{key: field, value: ddt[field]}"
        [excluded]="excluded"
        [hideEmpty]="true">
      </app-item-attribute>
    </div>
	</div>
</div>
