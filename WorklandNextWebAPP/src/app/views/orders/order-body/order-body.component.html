<div class="border-bottom" style="width: 100%;">
  <div class="d-flex flex-row justify-content-between">
    <!-- <div class="col-4 px-1 align-self-center">
      <div class="float-left mr-2">
        <ion-icon class="mr-2" name="list-outline"></ion-icon> {{ model }} - {{ quoteId }} - {{ items.length }}
      </div>
    </div> -->
    <div class="col-12 px-1 d-flex justify-content-left" *ngIf="quickAdd">
      <div class="buttons-bar my-1 mr-1">
        <div class="btn-toolbar">
          <div class="btn-group btn-group-sm">
            <label class="btn btn-danger cursor-pointer mb-0" title="Chiudi" (click)="onCloseQuickAdd()">
              <i class="cui-x" aria-hidden="true"></i>
            </label>
          </div>
        </div>
      </div>
      <div class="">
        <form novalidate [formGroup]="quickForm" class="form-horizontal-">
          <label class="col-form-label col-form-label-sm mb-0 mx-1 mt-1" for="articoloId">{{ 'APP.FIELD.articolo' |
            translate }}</label>
          <div class="d-inline-block mb-0" style="width: 250px;">
            <!-- <input type="text" formControlName="articoloId" class="form-control form-control-sm" placeholder="{{ 'APP.PLACEHOLDER.articolo' | translate }}"> -->
            <ng-select class="form-select-sm" name="articoloId" appendTo="body" bindValue="Id" bindLabel="DescrizioneEN"
              [items]="items$ | async" [trackByFn]="trackByItems" [placeholder]="'APP.MESSAGE.choose_articolo' | translate"
              [minTermLength]="minLengthTerm" [loading]="itemsLoading" [loadingText]="'APP.MESSAGE.loading' | translate"
              [notFoundText]="'APP.MESSAGE.no_items_found' | translate"
              [typeToSearchText]="'APP.MESSAGE.limit_lenght_term' | translate:minTranslateParams" [typeahead]="itemsInput$"
              formControlName="articoloId" (change)="onArticoloChange($event)">
              <ng-template ng-option-tmp let-item="item">
                {{ item.DescrizioneArticoloPerAzienda || item.DescrizioneEN }}<br />
                <small>{{item.CodiceArticolo}} - {{ item.Produttore }}</small><br />
                <small>{{item.Id}} - {{item.Fornitore}} - {{item.CodiceFornitore}}</small><br />
                <small>{{item.Disponibilita}} - {{item.PrezzoUnitario | currency: 'EUR':'symbol':undefined:'it-IT'
                  }}</small>
              </ng-template>
            </ng-select>
          </div>
          <label class="col-form-label col-form-label-sm mb-0 mx-1 mt-1" for="quantita">{{ 'APP.FIELD.quantita' | translate
            }}</label>
          <div class="d-inline-block mb-0 mt-1">
            <input type="text" formControlName="quantita" class="form-control form-control-sm"
              placeholder="{{ 'APP.PLACEHOLDER.quantita' | translate }}">
          </div>
          <div class="d-inline-block mb-0 ml-1 mt-1">
            <button class="btn btn-cyan btn-sm" [disabled]="!quickForm?.valid" (click)="onQuickSave(quickForm.value)">{{
              'APP.BUTTON.add' | translate }}</button>
          </div>
        </form>
      </div>
    </div>
    <div class="col-6- px-1 d-flex justify-content-left" *ngIf="!quickAdd">
      <div class="buttons-bar">
        <div class="btn-toolbar">
          <ng-template [appHasPermission]="'MENUDDT'" [action]="'create'" [owner]="true">
            <div class="btn-group btn-group-sm mr-1" *ngIf="editable">
              <label class="btn btn-cyan cursor-pointer my-1" title="Aggiungi" (click)="onQuickAdd(true)">
                <i class="cui-plus" aria-hidden="true"></i>
              </label>
              <label class="btn btn-cyan cursor-pointer my-1" title="Aggiungi" (click)="onEdit()" [class.disabled]="!currentItem">
                <i class="cui-pencil" aria-hidden="true"></i>
              </label>
              <a class="btn btn-cyan my-1" [class.disabled]="!currentItem"
                tooltip="{{ 'APP.TOOLTIP.delete' | translate }}"
                container="body"
                mwlConfirmationPopover
                [popoverTitle]="'APP.TITLE.delete' | translate"
                [popoverMessage]="'APP.MESSAGE.are_you_sure' | translate"
                [cancelText]="'APP.BUTTON.cancel' | translate"
                [cancelButtonType]="'outline-secondary btn-sm'"
                [confirmText]="'APP.BUTTON.confirm' | translate"
                [confirmButtonType]="'danger btn-sm'"
                [appendToBody]="true"
                placement="bottom"
                (confirm)="onDelete()">
                <i class="icon-trash"></i></a>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
    <div class="col-6- px-0 align-self-center" *ngIf="!quickAdd">
      <span class="small">{{ 'APP.MESSAGE.total_elements' | translate:{total: items?.length} }}</span>
    </div>
    <div class="col-6- px-0 align-self-center" *ngIf="!quickAdd">
      <div class="buttons-bar float-right">
        <div class="btn-toolbar">
          <div class="btn-group btn-group-sm mr-1">
            <label class="btn btn-outline-secondary cursor-pointer my-1" title="Aggiorna" (click)="refresh()">
              <i class="cui-reload" aria-hidden="true"></i>
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="px-0" [style.height]="options.height">
  <ngx-loading
    [show]="loading"
    [config]="loadingOptions">
  </ngx-loading>
  <div class="px-0" style="width: calc( 100% ); height: calc( 100% );" *ngIf="!loading">
    <!-- items list -->
    <ag-grid-angular
      style="width: 100%; height: 100%;"
      class="ag-theme-balham"
      [rowData]="items"
      [columnDefs]="agColumnDefs"
      [defaultColDef]="agDefaultColumnDefs"
      [gridOptions]="agGridOptions"
      (gridReady)="onGridReady($event)"
      (gridSizeChanged)="onGridSizeChanged($event)"
      (selectionChanged)="onSelectionChanged($event)"
      (sortChanged)="onSortChanged($event)"
      (cellDoubleClicked)="onDoubleClicked($event)">
    </ag-grid-angular>
  </div>
</div>
