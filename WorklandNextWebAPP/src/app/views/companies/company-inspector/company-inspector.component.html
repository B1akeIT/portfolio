<div class="text-center py-3" *ngIf="loading">
  <div class="h1 text-muted text-center mt-5 mb-1">
    <i class="fa fa-circle-o-notch fa-spin"></i>
  </div>
</div>
<div class="h-75" *ngIf="!company && !loading">
	<div class="details-content h-100">
    <div class="d-flex flex-column justify-content-center align-items-center h-100">
      <!-- loading & messages -->
      <div class="text-center" style="height: 120px;" *ngIf="!dragging">
        <ng-lottie [options]="options" (animationCreated)="animationCreated($event)"></ng-lottie>
      </div>
      <div class="text-center">
        <i class="icon-mouse icon-messages-50" *ngIf="dragging"></i>
        <h6 class="no-messages-text mt-3">{{ 'APP.MESSAGE.select_company' | translate }}</h6>
      </div>
    </div>
	</div>
</div>
<div class="mt-3" *ngIf="company && !loading">
  <div class="details-content" *ngIf="company.contatto">
    <!-- <div class="d-flex flex-column justify-content-center align-items-center mx-auto img-avatar bg-white border" [class.item-deactive]="!company.contatto.isActive" [ngStyle]="{ 'background-image': 'url(assets/img/asset-avatar.gif)', 'background-repeat': 'no-repeat', 'background-size': 'cover', 'background-position': 'center center', 'margin-bottom': '0rem', 'width': '100px', 'height': '100px' }" *ngIf="showAvatar"></div> -->
    <!-- <div class="fab-button fab-top fab-right" *ngIf="logoBrand">
      <img [src]="logoBrand.src" [width]="logoBrand.width" [height]="logoBrand.height">
    </div> -->
    <div class="text-center mb-3" *ngIf="company.fileLogo">
      <img [src]="company.urlPathLogo + '/' + company.fileLogo" [width]="60" [height]="60">
    </div>
    <div class="contatto">
      <div class="text-center mt-4 mb-2">
        <i class="text-warning icon-messages-50" *ngFor="let item of company.contatto.tipoContattoList | orderBy : ['name']"
          [ngClass]="{ 'cui-user text-warning': item.name == 'Agente', 'cui-euro text-danger': item.name == 'Cliente', 'cui-factory text-info': item.name == 'Fornitore' }"></i>
      </div>
      <div class="company-name">{{ company.contatto.ragioneSociale }}</div>
      <div class="company-name">{{ company.contatto.nome }} {{ company.contatto.cognome }}</div>
      <div class="text-center small mb-2">{{ (company.aziendaID ? 'APP.TITLE.subsidiary' : 'APP.TITLE.headquarter') | translate }}</div>
      <app-item-attribute *ngFor="let field of company.contatto | keyvalue"
        [attribute]="field"
        [excluded]="excluded"
        [hideEmpty]="true">
      </app-item-attribute>
    </div>
    <div class="warehouses-info">
      <div class="header-subsidiary d-flex justify-content-between align-items-center mt-3 px-1">
        <h6 class="mb-1">
          <ion-icon name="cube-outline"></ion-icon> {{ 'APP.TITLE.warehouses' | translate }}
        </h6>
        <div class="">
          <span class="badge badge-info">{{ company?.magazzinoList?.length || 0}}</span>
        </div>
      </div>
      <ng-container *ngFor="let item of company.magazzinoList">
        <app-warehouse
          [tenant]="tenant"
          [aziendaId]="companyId"
          [warehouse]="item"
          [view]="true"
          [showMap]="false">
        </app-warehouse>
      </ng-container>
    </div>
    <div class="subsidiary-info" *ngIf="!company.aziendaId">
      <div class="header-subsidiary d-flex justify-content-between align-items-center mt-3 px-1">
        <h6 class="mb-1">
          <ion-icon name="business-outline"></ion-icon> {{ 'APP.TITLE.subsidiaries' | translate }}
        </h6>
        <div class="">
          <span class="badge badge-info">{{ company?.filialiList?.length || 0}}</span>
        </div>
      </div>
      <ng-container *ngFor="let item of company.filialiList">
        <app-company-preview [tenant]="tenant" [companyId]="item.Id"></app-company-preview>
      </ng-container>
    </div>
    <div class="headquarter-info" *ngIf="company.aziendaId">
      <div class="header-headquarter d-flex justify-content-between align-items-center mt-3 px-1">
        <h6 class="mb-1">
          <ion-icon name="business-outline"></ion-icon> {{ 'APP.TITLE.headquarter' | translate }}
        </h6>
      </div>
      <app-company-preview [tenant]="tenant" [companyId]="company.aziendaId"></app-company-preview>
    </div>
	</div>
</div>
